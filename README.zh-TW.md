# HTTPS Over Proxy 節點 (適用於 n8n)

這個節點允許您在 n8n 工作流程中通過 HTTP 代理發送 HTTPS 請求，並提供與 n8n 內建 HTTP Request 節點相當的進階功能。

## 專案目的

這個專案主要是為了解決 n8n 標準 HTTP 節點的一個特定限制：**使用 HTTP 代理時無法連接到 HTTPS 網站**。

雖然 n8n 的標準 HTTP 節點對大多數 HTTP 請求運作良好，但在嘗試通過 HTTP 代理訪問 HTTPS 網站時會失敗。HTTPS Over Proxy 節點解決了這個問題，同時保持與內建 HTTP 節點相似的功能。

## 功能特點

### 核心功能
- 通過 HTTP 代理發送 HTTPS 請求
- 支援代理伺服器認證
- 可配置的超時設定
- 可選擇忽略 SSL 憑證驗證問題
- 支援各種請求方法 (GET, POST, PUT, DELETE 等)
- 支援查詢參數、標頭和主體資料

### 進階認證
- **自訂認證**: 基於 JSON 的自訂認證配置
- **預定義認證類型**: 支援 OAuth2、OAuth1、API Key、Basic Auth 等 n8n 認證類型
- **Bearer Token**: 內建 Bearer token 認證
- 自動認證應用和 token 管理

### 請求處理
- **批次處理**: 可配置的批次大小和間隔，用於處理多個請求
- **分頁支援**: 完整的分頁系統，支援多種模式：
  - 在每個請求中更新參數
  - 回應包含下一頁 URL
  - 自訂完成條件
- **回應優化**: 智能回應處理，包括 HTML 內容提取和 JSON 過濾
- **檔案上傳支援**: 完整的 multipart-form-data 和二進位檔案上傳功能

### 效能與可靠性
- **連線池管理**: HTTP/HTTPS 連線池以提升效能
- **智能錯誤處理**: 詳細的錯誤訊息和故障排除建議
- **請求超時控制**: 可配置的超時設定和智能錯誤報告
- **SSL 憑證處理**: 靈活的 SSL 憑證驗證選項

### 安全功能
- 防止 SSRF 攻擊
- 預設限制內部網路存取 (localhost, 127.0.0.1 等)
- 安全的代理認證處理
- 安全的錯誤報告，不暴露敏感資訊

## 安裝

### 本地安裝

1. 進入您的 n8n 安裝目錄
2. 安裝節點套件:
```bash
npm install n8n-nodes-httpsoverproxy
```

### 全局安裝

如果您全局安裝了 n8n，您也可以全局安裝此節點:

```bash
npm install -g n8n-nodes-httpsoverproxy
```

## 使用方法

安裝後，您可以在 n8n 節點面板的「網路」類別中找到「HTTPS Over Proxy」節點。

### 基本配置

1. 將 HTTPS Over Proxy 節點添加到您的工作流程中
2. 設定請求方法 (GET, POST 等)
3. 輸入目標 URL
4. 如需要，配置認證
5. 在選項部分配置代理設定:
   - 啟用「使用代理」
   - 輸入代理主機 (不含 http:// 或 https:// 前綴)
   - 輸入代理埠
   - 如需要，配置代理認證

### 進階功能

#### 認證
- 選擇無認證、預定義認證類型或自訂認證
- 對於預定義類型，從可用的 n8n 認證中選擇
- 對於自訂認證，配置基於 JSON 的認證邏輯

#### 批次處理
- 配置批次大小以處理多個項目
- 設定批次間的間隔
- 控制最大請求數

#### 分頁
- 為返回分頁結果的 API 啟用分頁
- 配置分頁參數和完成條件
- 設定請求間隔和最大頁面限制

#### 回應優化
- 啟用回應優化以獲得更好的資料處理
- 使用 CSS 選擇器配置 HTML 內容提取
- 設定 JSON 資料過濾和文字內容優化

### 進階選項

- **允許內部網路存取**: 啟用以允許請求內部網路地址 (預設為安全考量而禁用)
- **連線池設定**: 配置連線池以獲得更好的效能
- **SSL 憑證驗證**: 控制 SSL 憑證驗證
- **請求超時**: 設定自訂超時值

## 與 n8n HTTP Request 節點的比較

此節點提供與 n8n 內建 HTTP Request 節點的功能對等性，同時增加：
- ✅ HTTPS over HTTP 代理支援
- ✅ 增強的錯誤處理和詳細故障排除
- ✅ 進階連線池管理
- ✅ 完整的分頁系統實作
- ✅ 全面的認證支援
- ✅ 智能回應優化

## 疑難排解

### 常見問題

1. **連線被拒絕**: 確認代理伺服器正在運行且埠號正確
2. **超時錯誤**: 在選項中增加超時值
3. **SSL 憑證錯誤**: 如果您信任目標網站，請啟用「允許未授權憑證」
4. **代理格式錯誤**: 確保在代理主機欄位中不包含 http:// 或 https:// 前綴

## 授權

[MIT](LICENSE) 